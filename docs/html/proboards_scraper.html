

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Python API &mdash; ProBoards Forum Scraper 1.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="proboards_scraper.database" href="proboards_scraper.database.html" />
    <link rel="prev" title="pbd" href="pbd.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ProBoards Forum Scraper
          

          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="proboards_scraper.database.html">proboards_scraper.database</a></li>
<li class="toctree-l3"><a class="reference internal" href="proboards_scraper.scraper.html">proboards_scraper.scraper</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-proboards_scraper">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ProBoards Forum Scraper</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Python API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/proboards_scraper.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="python-api">
<h1>Python API<a class="headerlink" href="#python-api" title="Permalink to this headline">¶</a></h1>
<p>TODO: Description here.</p>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="proboards_scraper.database.html">proboards_scraper.database</a></li>
<li class="toctree-l1"><a class="reference internal" href="proboards_scraper.scraper.html">proboards_scraper.scraper</a></li>
</ul>
</div>
</div>
<div class="section" id="module-proboards_scraper">
<span id="module-contents"></span><span id="main-module"></span><h2>Module contents<a class="headerlink" href="#module-proboards_scraper" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="proboards_scraper.ScraperManager">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">proboards_scraper.</span></span><span class="sig-name descname"><span class="pre">ScraperManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content_queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">driver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">short_delay_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long_delay_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/scraper_manager.html#ScraperManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.ScraperManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class has three purposes: 1) to store references to objects that
will be used in the process of scraping, 2) to serve as an abstraction
layer between the scraper functionality and the database, and 3) to
handle HTTP requests (adding delays between requests as needed to
avoid throttling) and process the queues (popping items from the queues
in the necessary order and inserting them into the database).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>db</strong> (<a class="reference internal" href="proboards_scraper.database.html#proboards_scraper.database.Database" title="proboards_scraper.database.Database"><code class="xref py py-data docutils literal notranslate"><span class="pre">proboards_scraper.database.Database</span></code></a>) – Database handle.</p></li>
<li><p><strong>client_session</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">aiohttp.ClientSession</span></code>) – <code class="docutils literal notranslate"><span class="pre">aiohttp</span></code> session.</p></li>
<li><p><strong>content_queue</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional[asyncio.Queue]</span></code>) – Queue to which all content (excluding users) should
be added for insertion into the database.</p></li>
<li><p><strong>driver</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional[selenium.webdriver.Chrome]</span></code>) – Selenium Chrome driver.</p></li>
<li><p><strong>image_dir</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional[pathlib.Path]</span></code>) – Directory to which downloaded images should be saved.</p></li>
<li><p><strong>user_queue</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional[asyncio.Queue]</span></code>) – Queue to which users should be added for insertion
into the database.</p></li>
<li><p><strong>request_threshold</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">int</span></code>) – After every <code class="xref py py-attr docutils literal notranslate"><span class="pre">request_threshold</span></code> calls to
<a class="reference internal" href="#proboards_scraper.ScraperManager.get_source" title="proboards_scraper.ScraperManager.get_source"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ScraperManager.get_source()</span></code></a>, wait <code class="xref py py-attr docutils literal notranslate"><span class="pre">long_delay_time</span></code>
seconds before continuing. This is to prevent request
throttling due to a large number of consecutive requests.</p></li>
<li><p><strong>short_delay_time</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">float</span></code>) – Number of seconds to wait after each call to
<a class="reference internal" href="#proboards_scraper.ScraperManager.get_source" title="proboards_scraper.ScraperManager.get_source"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ScraperManager.get_source()</span></code></a> (to help prevent request
throttling).</p></li>
<li><p><strong>long_delay_time</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">float</span></code>) – See <code class="xref py py-attr docutils literal notranslate"><span class="pre">request_threshold</span></code>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="proboards_scraper.ScraperManager.download_image">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">download_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/scraper_manager.html#ScraperManager.download_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.ScraperManager.download_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Download an image to <code class="xref py py-attr docutils literal notranslate"><span class="pre">image_dir</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>url</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">str</span></code>) – URL of the image to be downloaded.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Image download status and metadata; see
<a class="reference internal" href="#proboards_scraper.download_image" title="proboards_scraper.download_image"><code class="xref py py-func docutils literal notranslate"><span class="pre">proboards_scraper.download_image()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="proboards_scraper.ScraperManager.get_source">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">get_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/scraper_manager.html#ScraperManager.get_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.ScraperManager.get_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around <a class="reference internal" href="#proboards_scraper.get_source" title="proboards_scraper.get_source"><code class="xref py py-func docutils literal notranslate"><span class="pre">proboards_scraper.get_source()</span></code></a> with an
added short delay via call to <code class="xref py py-func docutils literal notranslate"><span class="pre">time.sleep()</span></code> before each
request, and a longer delay after every <code class="docutils literal notranslate"><span class="pre">self.request_threshold</span></code>
calls to <a class="reference internal" href="#proboards_scraper.ScraperManager.get_source" title="proboards_scraper.ScraperManager.get_source"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ScraperManager.get_source()</span></code></a>. This rate-limiting is
performed to help avoid request throttling by the server, which may
result from a large number of requests in a short period of time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>url</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">str</span></code>) – URL whose page source to retrieve.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">bs4.BeautifulSoup</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>BeautifulSoup page source object.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="proboards_scraper.ScraperManager.insert_guest">
<span class="sig-name descname"><span class="pre">insert_guest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/scraper_manager.html#ScraperManager.insert_guest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.ScraperManager.insert_guest" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert a guest user into the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">str</span></code>) – The guest’s username.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The user ID of the guest returned by
<a class="reference internal" href="proboards_scraper.database.html#proboards_scraper.database.Database.insert_guest" title="proboards_scraper.database.Database.insert_guest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">proboards_scraper.database.Database.insert_guest()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="proboards_scraper.ScraperManager.insert_image">
<span class="sig-name descname"><span class="pre">insert_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/scraper_manager.html#ScraperManager.insert_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.ScraperManager.insert_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert an image entry into the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">dict</span></code>) – A dict representing the image entry.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The image ID of the image returned by
<a class="reference internal" href="proboards_scraper.database.html#proboards_scraper.database.Database.insert_image" title="proboards_scraper.database.Database.insert_image"><code class="xref py py-meth docutils literal notranslate"><span class="pre">proboards_scraper.database.Database.insert_image()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="proboards_scraper.ScraperManager.run">
<em class="property"><span class="pre">async</span> </em><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/scraper_manager.html#ScraperManager.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.ScraperManager.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the scraper, first processing the user queue and then processing
the content queue, calling the appropriate database insert/query
methods as needed, and closing the Selenium and aiohttp sessions upon
completion.</p>
<p>Because all content (threads, posts, etc.) is associated with users,
the content queue is not processed until all users have been added
from the user queue (the end of which is marked by a sentinel value).
Guest users are an exception, since they are not present in the site’s
member list; instead, guests are added/queried as they are encountered
by calling <a class="reference internal" href="#proboards_scraper.ScraperManager.insert_guest" title="proboards_scraper.ScraperManager.insert_guest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ScraperManager.insert_guest()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proboards_scraper.download_image">
<em class="property"><span class="pre">async</span> </em><span class="sig-prename descclassname"><span class="pre">proboards_scraper.</span></span><span class="sig-name descname"><span class="pre">download_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/http_requests.html#download_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.download_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to download the image at <code class="docutils literal notranslate"><span class="pre">url</span></code> to the directory specified by
<code class="docutils literal notranslate"><span class="pre">dst_dir</span></code>. The downloaded file is named after its MD5 hash to ensure
uniqueness. If a file already exists on disk (i.e., has been previously
downloaded), it is not rewritten.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">str</span></code>) – Image URL.</p></li>
<li><p><strong>session</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">aiohttp.ClientSession</span></code>) – <code class="docutils literal notranslate"><span class="pre">aiohttp</span></code> session.</p></li>
<li><p><strong>dst_dir</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">pathlib.Path</span></code>) – Directory to which the image should be downloaded.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p>A dict containing information on the download attempt and, if download
was successful, image metadata:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;get&quot;</span><span class="p">:</span> <span class="n">HTTP</span> <span class="n">response</span> <span class="n">code</span><span class="p">,</span>
        <span class="s2">&quot;exists&quot;</span><span class="p">:</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">image</span> <span class="n">already</span> <span class="n">exists</span> <span class="n">on</span> <span class="n">disk</span> <span class="p">(</span><span class="nb">bool</span><span class="p">),</span>
        <span class="s2">&quot;valid&quot;</span><span class="p">:</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">file</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">valid</span> <span class="n">image</span> <span class="n">file</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">image</span> <span class="n">download</span> <span class="n">URL</span><span class="p">,</span>
        <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">downloaded</span> <span class="n">image</span> <span class="n">filename</span><span class="p">,</span>
        <span class="s2">&quot;md5_hash&quot;</span><span class="p">:</span> <span class="n">file</span> <span class="n">MD5</span> <span class="nb">hash</span><span class="p">,</span>
        <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="n">filesize</span> <span class="n">on</span> <span class="n">disk</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proboards_scraper.get_chrome_driver">
<span class="sig-prename descclassname"><span class="pre">proboards_scraper.</span></span><span class="sig-name descname"><span class="pre">get_chrome_driver</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/http_requests.html#get_chrome_driver"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.get_chrome_driver" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an instance of a Selenium Chrome driver with the headless
option set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">selenium.webdriver.Chrome</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Headless Chrome driver.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proboards_scraper.get_login_cookies">
<span class="sig-prename descclassname"><span class="pre">proboards_scraper.</span></span><span class="sig-name descname"><span class="pre">get_login_cookies</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">home_url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">driver</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">page_load_wait</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/http_requests.html#get_login_cookies"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.get_login_cookies" title="Permalink to this definition">¶</a></dt>
<dd><p>Logs in to a Proboards account using Selenium and returns the cookies from
the authenticated login session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>home_url</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">str</span></code>) – URL for the Proboards forum homepage.</p></li>
<li><p><strong>username</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">str</span></code>) – Login username.</p></li>
<li><p><strong>password</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">str</span></code>) – Login password.</p></li>
<li><p><strong>driver</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional[selenium.webdriver.Chrome]</span></code>) – Selenium Chrome driver (optional).</p></li>
<li><p><strong>page_load_wait</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">int</span></code>) – Time (in seconds) to wait to allow the page to load.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">List[dict]</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of dicts, where each dict corresponds to a cookie, from the
Selenium Chrome driver.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proboards_scraper.get_login_session">
<span class="sig-prename descclassname"><span class="pre">proboards_scraper.</span></span><span class="sig-name descname"><span class="pre">get_login_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cookies</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/http_requests.html#get_login_session"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.get_login_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an authenticated <code class="docutils literal notranslate"><span class="pre">aiohttp</span></code> session using the cookies provided.</p>
<p>This is achieved by converting cookies from a Selenium driver session
to <code class="docutils literal notranslate"><span class="pre">http</span></code> module Morsels (see <a class="reference external" href="https://docs.python.org/3/library/http.cookies.html#morsel-objects">http.cookies.Morsel</a>), which can be
added to the <code class="docutils literal notranslate"><span class="pre">aiohttp</span></code> session’s cookie jar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cookies</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">List[dict]</span></code>) – A list of dicts as returned by <a class="reference internal" href="#proboards_scraper.get_login_cookies" title="proboards_scraper.get_login_cookies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_login_cookies()</span></code></a>,
i.e., from a Selenium driver session.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">aiohttp.ClientSession</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An <code class="docutils literal notranslate"><span class="pre">aiohttp</span></code> session with the given cookies in its cookie jar.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proboards_scraper.get_source">
<em class="property"><span class="pre">async</span> </em><span class="sig-prename descclassname"><span class="pre">proboards_scraper.</span></span><span class="sig-name descname"><span class="pre">get_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/http_requests.html#get_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.get_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Get page source of a URL.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">str</span></code>) – URL to visit.</p></li>
<li><p><strong>session</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">aiohttp.ClientSession</span></code>) – <code class="docutils literal notranslate"><span class="pre">aiohttp</span></code> session.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">bs4.BeautifulSoup</span></code></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Page source.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proboards_scraper.run_scraper">
<span class="sig-prename descclassname"><span class="pre">proboards_scraper.</span></span><span class="sig-name descname"><span class="pre">run_scraper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_dir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'site'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_users</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proboards_scraper/core.html#run_scraper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proboards_scraper.run_scraper" title="Permalink to this definition">¶</a></dt>
<dd><p>Main function that runs the scraper and calls the appropriate <cite>async</cite>
functions/methods. This is the only function that needs to be called to
actually run the scraper (with all the default settings).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">str</span></code>) – <p>URL of the the page to scrape.</p>
<ul>
<li><p>If the URL is that of the forum homepage (e.g.,
<cite>https://yoursite.proboards.com/</cite>), the entire site
(including users, shoutbox, category/board/thread/post content,
etc.) will be scraped.</p></li>
<li><p>If it is the URL for the members page
(e.g., <cite>https://yoursite.proboards.com/members</cite>), only the users
will be scraped.</p></li>
<li><p>If it is the URL for a specific user profile
(e.g., <cite>https://yoursite.proboards.com/user/10</cite>), only that
particular user will be scraped.</p></li>
<li><p>If it is the URL for a board
(e.g., <cite>https://yoursite.proboards.com/board/3/board-name</cite>),
only that particular board and its threads/posts/sub-boards
will be scraped.</p></li>
<li><p>If it is the URL for a thread
(e.g., <cite>https://yoursite.proboards.com/thread/1234/thread-title</cite>)
only that particular thread and its posts will be scraped.</p></li>
</ul>
</p></li>
<li><p><strong>dst_dir</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">pathlib.Path</span></code>) – Directory in which to place the resulting files. The database
file is written to <code class="docutils literal notranslate"><span class="pre">&lt;dst_dir&gt;/forum.db</span></code> and image files are
saved to <code class="docutils literal notranslate"><span class="pre">&lt;dst_dir&gt;/images</span></code>.</p></li>
<li><p><strong>username</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional[str]</span></code>) – Username for login.</p></li>
<li><p><strong>password</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">Optional[str]</span></code>) – Password for login.</p></li>
<li><p><strong>skip_users</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">bool</span></code>) – Skip scraping/adding users from the forum members page
(only applies if the forum homepage is provided for <code class="docutils literal notranslate"><span class="pre">url</span></code>.</p></li>
<li><p><strong>no_delay</strong> (<code class="xref py py-data docutils literal notranslate"><span class="pre">bool</span></code>) – Do not add a delay between subsequent requests (see
<a class="reference internal" href="#proboards_scraper.ScraperManager" title="proboards_scraper.ScraperManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">ScraperManager</span></code></a> for more information). Note that this may
result in request throttling.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-data docutils literal notranslate"><span class="pre">None</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="proboards_scraper.database.html" class="btn btn-neutral float-right" title="proboards_scraper.database" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="pbd.html" class="btn btn-neutral float-left" title="pbd" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Najam R. Syed.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>